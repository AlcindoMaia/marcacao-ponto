<!doctype html>
<html lang="pt">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Criar Obra + Gerar QR — Maia Solutions</title>

<link rel="stylesheet" href="style.css">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>

<style>
.container { padding: 20px; }
.qr-preview { margin-top: 25px; text-align:center; }
canvas { 
    border:1px solid #ddd; 
    padding:10px; 
    background:white;
    border-radius: 8px;
}
label { font-weight:bold; display:block; margin-top:15px; }
input { width:100%; padding:8px; margin-top:5px; }
</style>
</head>

<body>

<div class="container card">

<h2>Criar Nova Obra + Gerar QR Code</h2>

<form id="formObra">

    <label>Nome da Obra</label>
    <input id="nomeObra" required />

    <label>Morada (opcional)</label>
    <input id="morada" />

    <label>Raio de validação (metros)</label>
    <input id="raio" type="number" value="120" />

    <label>Coordenadas GPS</label>
    <input id="latitude" placeholder="Latitude" readonly />
    <input id="longitude" placeholder="Longitude" readonly />

    <button type="button" class="btn secondary" id="btnGPS">Obter Localização</button>

    <button type="submit" class="btn primary">Criar Obra + Gerar QR</button>
</form>

<div class="qr-preview hidden" id="qrBox">
    <h3>QR Code da Obra</h3>
    <canvas id="qrCanvas"></canvas>

    <br><br>
    <a id="downloadBtn" class="btn primary" download="">Descarregar QR</a>
</div>

</div>

<script src="qr.js"></script>

</body>
</html>
