<!doctype html>
<html lang="pt">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Criar Obra + Gerar QR — Maia Solutions</title>

<link rel="stylesheet" href="style.css">

<!-- Supabase -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<!-- QR library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>

<!-- jsPDF para gerar PDF A4 -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
.container { padding: 20px; }
.qr-preview { margin-top: 25px; text-align:center; }
canvas { border:1px solid #ddd; padding:10px; background:#fff; }
label { font-weight: bold; margin-top:10px; display:block; }
input { width: 100%; padding:8px; margin:5px 0 15px 0; }
</style>

</head>

<body>

<div class="container card">

<h2>Criar Nova Obra + Gerar QR Code</h2>

<form id="formObra">

    <label>Nome da Obra</label>
    <input id="nomeObra" required />

    <label>Morada (opcional)</label>
    <input id="morada" />

    <label>Raio de validação (metros)</label>
    <input id="raio" type="number" value="120" />

    <label>Coordenadas GPS</label>
    <input id="latitude" placeholder="Latitude" readonly />
    <input id="longitude" placeholder="Longitude" readonly />

    <button type="button" class="btn secondary" id="btnGPS">
        Obter Localização Atual
    </button>

    <button type="submit" class="btn primary">
        Criar Obra + Gerar QR
    </button>
</form>

<div class="qr-preview hidden" id="qrBox">
    <h3>QR Code da Obra</h3>
    <canvas id="qrCanvas"></canvas>
    <br>
    <a id="downloadBtn" class="btn secondary" download="QR_Obra.png">
        Descarregar QR (PNG)
    </a>
    <br><br>
    <button id="btnPDF" class="btn secondary">
        Descarregar PDF A4
    </button>
</div>

</div>

<script src="qr.js"></script>

</body>
</html>
